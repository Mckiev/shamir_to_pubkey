<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Password Generator & Shamir Secret Sharing</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="tab-header">
        <button class="tab-link" onclick="openTab('generateTab')">Generate & Split</button>
        <button class="tab-link" onclick="openTab('combineTab')">Combine</button>
    </div>

    <div id="generateTab" class="tab-content">
        <h1>Password Generator & Shamir Secret Sharing</h1>

        <div id="password">
            <textarea id="passwordInput" placeholder="Enter your password or generate one" rows="4" cols="50"></textarea>
            <button id="generatePassword">Generate Password</button>
        </div>
    
    
        <div id="secretSharing">
            <label for="totalShares">Total Shares:</label>
            <input type="number" id="totalShares" min="2" value="5">
            <label for="minShares">Shares for Recovery:</label>
            <input type="number" id="minShares" min="2" value="3">
            <button id="splitSecret">Split Secret</button>
            <table id="shares">
                <!-- Rows will be populated here -->
            </table>

            <div id="publicKeyUpload">
                <h2>Add JSON with Public Keys</h2>
                <input type="file" id="publicKeyFile" accept=".json">
            </div>
            <div><button id="encryptSharesButton">Encrypt Shares</button></div>

            <div class="table-container">
                <table id="encryptedShares">
                    <!-- Headers for the table -->
                    <tr>
                        <th>Share #</th>
                        <th>Ethereum Address</th>
                        <th>Public Key</th>
                        <th>Original Share</th>
                        <th>Encrypted Share</th>
                    </tr>
                    <!-- Rows will be populated here -->
                </table>
            </div>

        </div>

        <div id="fileEncryption">
            <h2>File Encryption</h2>
            <input type="file" id="fileInput">
            <button id="encryptFile">Encrypt File</button>
            <p id="encryptionStatus"></p>
        </div>
    </div>

    <div id="combineTab" class="tab-content" style="display:none;">
        <h1>Combine Shares to Recover Password</h1>
        <div id="combineShares">
            <h2>Combine Shares to Recover Password</h2>
            <div class="add-remove">
                <button id="addShareRow">Add Share Row</button>
                <button id="removeShareRow">Remove Share Row</button>
            </div>
            <div id="shareRows">
                <!-- Textareas will be dynamically added here -->
            </div>
            <button id="combineButton">Combine Shares</button>
            <h3>Recovered password:</h3>
            <textarea id="recoveredPassword" readonly></textarea>
        </div>
        <div id="decryptionDiv">
            <h2>Decrypt File</h2>
            <input type="file" id="encryptedFileInput">
            <input type="password" id="decryptionPasswordInput" placeholder="Enter Password">
            <button onclick="decryptFile()">Decrypt File</button>
            <p id="decryptionStatus">Status: Waiting for file and password...</p>
        </div>        

    </div>

    <!-- <script src="secrets.js"></script> -->
    <script src="bundle.js"></script>
</body>
</html>